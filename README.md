

基于跳表实现的轻型键值型数据库—C++
=====

> - A demo based on skip list written in C++ language.



## 概述

> - 本项目是一个采用跳表作为底层数据结构实现的轻量级key-value存储引擎。
> - 非关系型数据库redis，以及levedb，rockdb其核心存储引擎的数据结构就是跳表。
> - 本项目使用了类模板进行编程；实现了对数据的增删改查，以及数据落盘和文件加载数据等功能；对数据库性能进行了简单的压力测试，采用了随机写读的方法，在不同数据规模下获得了每秒可处理请求数（QPS）指标。
> - 如发现文档中或者源代码中有错误，欢迎大家在 `Issues` 中研究讨论，欢迎大家 `Fork` 和 `Pull requests` 改善代码，十分感谢！

## 使用语言

- C++

## 主要功能接口

* **insert_element（插入数据）**
* **search_element（搜索数据）**
* **delete_element（删除数据）**
* **update_element（更新数据）**
* **display_list（展示跳表）**
* **dump_file（数据落盘）**
* **load_file（数据加载）**
* **size（跳表大小）**
* **clear_list（清空跳表）**

## 项目中的文件
- skiplist.h 存储引擎核心  
- main.cpp 使用控制台进行数据操作
- bin文件夹 生成可执行文件目录（.main 和 .stress） 
- makefile 编译脚本
- store文件夹 生成数据落盘文件（dumpFile）
- stress_test_start.sh 压力测试脚本
- stress-test文件夹 压力测试main文件和结果文件
- README.md 项目介绍

## 运行

```c++
make
./bin/main
```

```c++
sh stress_test_start.sh
```

## 压力测试结果

跳表最大高度：18层

腾讯云服务器 （1核2G，1M 带宽）

采用了随机写读的方法

| 数据规模 |    插入    |    删除    |    更新    |    查找    |
| :------: | :--------: | :--------: | :--------: | :--------: |
| **10W**  | 0.089594 s | 0.086015 s | 0.115649 s | 0.104312 s |
| **50W**  | 0.813954 s | 0.798541 s | 0.972145 s | 0.761612 s |
| **100W** | 1.998540 s | 1.945613 s | 2.524866 s | 2.135153 s |

以100W数据结果计算QPS：

- 插入：50.04W
- 删除：51.40W
- 更新：39.60W
- 查找：46.84W